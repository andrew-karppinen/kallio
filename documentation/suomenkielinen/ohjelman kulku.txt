


ENNEN PELIÄ:

Ennen kuin peli pyörii se vaatii alustamista:

importtaa src kansio:
from src import *

Lataa kuvat ja aseta ne luokkiin
esim:
Tnt.image = kuva (pygame surface)

luo pelaajat:
local_player = Player(playerimage) #nämä koodi esimerkit saattavat muuttua!
remote_player = Player(playerimage2, False)


luo gamedata olio:
gamedata = Gamedata(local_player:object,multiplayer:bool = False,server:bool = False,remote_player:object = None):

lue kartan tiedot:
mapstr, gamedata.map_height_, gamedata.map_width_,gamedata.required_score_ = ReadMapFile (moninpelissä client saa nämä tiedot socketin kautta)

aseta mapstr gamedata olioon:
SetMap(gamedata, mapstr) #muuttaa merkkijonon pelin kartaksi ja asettaa sen gamedata olioon


tämän jälkeen peli voidaan aloittaa mikäli se on yksinpeli:
Run(gamedata:object,connection:object = None)


moninpelissä pitää viellä tehdä asioita:


CLIENT:

luo Clien olion verkkoyhteyttä varten


yhdistää serveriin
lähettää viestin että on valmis ja lähettää 5 numeroisen koodin

serveri vastaa tähän lähettämällä aloitusinfon ja kartan, odotetaan näitä
lähettää serverille viestin että kartta ja muut tiedot vastaanotettu

tämän jälkeen peli alkaa



SERVER:
lataa kartta

luo SERVER olion verkkoyhteyttä varten

odottaa että clien yhdistää

lukee cleintin viestit ja tarkistaa readytostart numerosarjan

lähettää aloitusinfon ja kartan
aloitus info sisältää ainakin tiedot kartan koosta ja vaadittavien pisteiden määrän

lukee clientin kuittauksen

aloittaa pelin




Peli SILMUKKA:

-
lukee saapuneet viestit


sijoittaa saapuneen kartan paikalliseen karttaan


-
piirtää tilanteen




-
tutkii tnt tilanteen
tutkii räjähtääkö




-
toteuttaa räjähdykset
jos räjähdys 0 vaihtaa räjähdyksen 1
jos räjähdys 1 poistaa räjähdyksen tämän jälkeen


jos räjähdysalueella pelaaja, peli loppuu
räjäyttää räjäytettävät asiat pois tieltä
jos räjähdysaluella tnt räjäyttää tämän ja asettaa uuden räjähdysalueen räjähdykset arvoon 0

-
vihollishahmon toiminnot
liikuttaa vihollista
tutkii liikkuuko pelaajan päälle jos liikkuu, peli loppuu



-
Paikallisen pelaajan liikkeet
tutkii yrittääkö paikallinen pelaaja mennä maaliin jos yrittää laskee onko pisteitä keräämättä jos ei tämä pelaaja pääsee maaliin
tutkii yrittääkö työntää kiveä tai tnt, tutkii onko työnnetävä pudotuksessa jne
tutkii meneekö pisteen tai perustilen päälle jne

-
tutkii kivien tilanteen
tutkii tippuuko pelaajan päälle
tutkii putoaako vihollisen päälle
tutkii tippuuko tnteen päälle

-
piirtää tilanteen


